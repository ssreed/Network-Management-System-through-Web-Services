<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>



    parseResponse = function (data) {
        $("#node_list").empty();
        $.each(data, function (pIndex, pElement) {
            var lName = { text: pElement.name };
            if (lName.text == "OID Name") {
                var lValue = { text: pElement.value };

                var lLI = document.createElement("li");
                $("#node_list").append(lLI);
                $(lLI).append($("<p>", lValue));
            }  // if
            else if (lName.text == "NETSTAT" || lName.text == "STATUS" || lName.text == "TRANSLATE") {
                var lValue = { text: pElement.value };

                var lLI = document.createElement("li");
                $("#node_list").append(lLI);
                $(lLI).append($("<p>", lValue));
            }  // if
            else {
                var lValue = { text: pElement.value };
                var lLI = document.createElement("li");
                $("#node_list").append(lLI);
                $(lLI).append($("<p>", lName));
                $(lLI).append($("<p>", lValue));
            }  // else
        });
    }  // parseResponse

    ajaxCallFailed = function (pJQXHR, pTextStatus) {
        alert("Error:" + pJQXHR + " Status:" + pTextStatus);
    }

    $(document).ready(function () {
        $('#commands').change(function () {
            if ($('select#commands').val() === '' || $('select#commands').val() === 'montiorSNMPStatus'
                || $('select#commands').val() === 'showRmonAlarm' || $('select#commands').val() === 'showRmonEvent') {
                $('#optionalParameters').html('');
            }

            if ($('select#commands').val() === 'createsec2group') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="groupnameLabel">Group Name</label>'
                    + '<input name = "groupname" type = "text" id = "groupname"/>'
                    + '<label id="securitynameLabel">Security Name</label>'
                    + '<input name = "securityname" type = "text" id = "securityname"/>';

                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'deletesec2group') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="securitynameLabel">Security Name</label>'
                    + '<input name = "securityname" type = "text" id = "securityname"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'createview') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="viewNameLabel">View Name</label>'
                    + '<input name = "viewname" type = "text" id = "viewname"/>'
                    + '<label id="oidTreeLabel">OID Tree</label>'
                    + '<input name = "oid" type = "text" id="oid"/>'
                    + '<select name="option">'
                    + '<option value="included">included</option>'
                    + '<option value="excluded">excluded</option>'
                    + '</select>';
                $('#optionalParameters').append(form);
            }
            
            if ($('select#commands').val() === 'deleteview') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="viewNameLabel">View Name</label>'
                    + '<input name = "viewname" type = "text" id = "viewname"/>'
                    + '<label id="oidTreeLabel">OID Tree</label>'
                    + '<input name = "oid" type = "text" id="oid"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'createaccess') {
                $('#optionalParameters').html('');
                form =
                    '<label id="groupname">Group Name</label>'
                    + '<input name = "groupname" type = "text" id = "groupname"/>'
                    + '<label id="readviewnameLabel">Read View Name</label>'
                    + '<input name = "readviewname" type = "text" id = "readviewname"/>'
                    + '<label id="writeviewnameLabel">Write View Name</label>'
                    + '<input name = "writeviewname" type = "text" id = "writeviewname"/>'
                    + '<label id="notifyviewnameLabel">Notify View Name</label>'
                    + '<input name = "notifyviewname" type = "text" id = "notifyviewname"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'deleteaccess') {
                $('#optionalParameters').html('');
                form =
                    '<label id="groupname">Group Name</label>'
                    + '<input name = "groupname" type = "text" id = "groupname"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'set') {
                $('#optionalParameters').html('');
                form =
                     '<select name="oid" id="oid">'
                    + '<option value="1.3.6.1.2.1.1.4.0">contact</option>'
                    + '<option value="1.3.6.1.2.1.1.6.0">location</option>'
                    + '<option value="1.3.6.1.2.1.1.5.0">name</option>'
                    + '</select>'
                    + '<input name = "value" type = "text" id = "option"/>';
                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'enablesnmpagent') {
                $('#optionalParameters').html('');
                form =
                     '<select name="option" id="option">'
                    + '<option value="enable">enable</option>'
                    + '<option value="disable">disable</option>'
                    + '</select>';

                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'enablermon') {
                $('#optionalParameters').html('');
                form =
                     '<select name="option" id="option">'
                    + '<option value="native">native</option>'
                    + '<option value="promisciuos">promisciuos</option>'
                    + '</select>';

                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'setrmonqueue') {
                $('#optionalParameters').html('');
                form =
                    '<label id="queueRMONSizeLabel">Queue size</label>'
                    + '<input name = "queuesize" type = "text" id = "queuesize"/>';

                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'setrmonalarm') {
                $('#optionalParameters').html('');
                form =
                    '<label id="alarmIndexLabel">index</label>'
                    + '<input name = "alarmIndex" type = "text" id = "alarmIndex"/>'
                    + '<label id="alarmIntervalLabel">interval</label>'
                    + '<input name = "alarmInterval" type = "text" id = "alarmInterval"/>'
                    + '<label id="alarmVariableLabel">variable</label>'
                    + '<input name = "alarmVariable" type = "text" id = "alarmVariable"/>'
                    + '<label id="alarmSampleTypeLabel">sample type</label>'
                    + '<input name = "alarmSampleType" type = "text" id = "alarmSampleType"/>'
                    + '<label id="alarmStartupAlarmLabel">start up alarm</label>'
                    + '<input name = "alarmStartupAlarm" type = "text" id = "alarmStartupAlarm"/>'
                    + '<label id="alarmRisingThresholdLabel">rising threshold</label>'
                    + '<input name = "alarmRisingThreshold" type = "text" id = "alarmRisingThreshold"/>'
                    + '<label id="alarmFallingThresholdLabel">falling threshold</label>'
                    + '<input name = "alarmFallingThreshold" type = "text" id = "alarmFallingThreshold"/>'
                    + '<label id="alarmRisingEventIndexLabel">rising event index</label>'
                    + '<input name = "alarmRisingEventIndex" type = "text" id = "alarmRisingEventIndex"/>'
                    + '<label id="alarmFallingEventIndexLabel">rising event index</label>'
                    + '<input name = "alarmFallingEventIndex" type = "text" id = "alarmFallingEventIndex"/>'
                    + '<label id="alarmStatusLabel">status</label>'
                    + '<input name = "alarmStatus" type = "text" id = "alarmStatus"/>';



                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'setrmonevent') {
                $('#optionalParameters').html('');
                form =
                    '<label id="eventIndexLabel">index</label>'
                    + '<input name = "eventIndex" type = "text" id = "eventIndex"/>'
                    + '<label id="eventDescriptionLabel">description</label>'
                    + '<input name = "eventDescription" type = "text" id = "eventDescription"/>'
                    + '<label id="eventTypeLabel">type</label>'
                    + '<input name = "eventType" type = "text" id = "eventType"/>'
                    + '<label id="eventCommunityLabel">community</label>'
                    + '<input name = "eventCommunity" type = "text" id = "eventCommunity"/>'
                    + '<label id="eventLastTimeSentLabel">last time sent</label>'
                    + '<input name = "eventLastTimeSent" type = "text" id = "eventLastTimeSent"/>'
                    + '<label id="eventOwnerLabel">owner</label>'
                    + '<input name = "eventOwner" type = "text" id = "eventOwner"/>'
                    + '<label id="eventStatusLabel">status</label>'
                    + '<input name = "eventStatus" type = "text" id = "eventStatus"/>';

                $('#optionalParameters').append(form);
            }
        });

        $('#input_form').submit(function () {

            var lURL = "https://" + $('#txtServerHost').val() + ":8181/CS158B_WEBSERVICES/rest/snmpoperation/" + $('select#commands').val() + "?" + $(this).serialize();
            var result = $('#result').html(lURL);
            $.ajax({
                cache: true,
                url: lURL,
                data: {},
                datatype: "GET",
                contentType: "application/javascript",
                dataType: "jsonp",
                success: parseResponse,
                error: ajaxCallFailed
            });  // ajax

            return false;
        });
    });
</script>
</head>
<body>
<div id="input">
	 <form id="input_form" >
		<label id="serverhostlabel">Server Host: </label>
		<input type = "text" id = "txtServerHost" value = "24.7.122.241"/>
		<label id="hostlabel">Host</label>
		<input type="text" name="host" id="host" placeholder="Host IP goes here" value = "" required> 
		<label id="communitylabel">Community</label>
		<input type="password" name="community" id="community" placeholder="Community" value = "public">
         <div id="optionalParameters"></div>
		<input type="submit" value="Submit" name="submit"/>
	</form>
            <label id="commandlabel">Commands</label>
                <select name="commands" id = "commands">
                    <option value="">Choose a command</option>
                    <option value="createsec2group">create group</option>
                    <option value="deletesec2group">delete group</option>
                    <option value="createview">create view</option>
                    <option value="deleteview">delete view</option>
                    <option value="createaccess">create access control</option>
                    <option value="deleteaccess">delete access control</option>
					<option value="set">establish the contact, location, name</option>
					<option value="montiorsnmpstatus">monitor SNMP status</option>
					<option value="enablesnmpagent">enable the snmp agent</option>
					<option value="enablermon">enable RMON</option>
                    <option value="showrmonalarm">show RMON alarm</option>
                    <option value="showrmonevent">show RMON event</option>
					<option value="setrmonqueue">set RMON queue</option>
					<option value="setrmonalarm">set RMON alarm</option>
					<option value="setrmonevent">set RMON event</option>
                </select>
</div>
<div id="result"></div>
<div id="node_list"></div>
</body>
</html>