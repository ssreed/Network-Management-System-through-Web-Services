<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>



    parseResponse = function (data) {
        $("#node_list").empty();

        if ($('select#commands').val() == 'showrmonalarm' ||
        $('select#commands').val() == 'setrmonalarm') {
            table = '<table border = 1>'
                + '<tr><td>alarm index</td>'
                + '<td>alarm variable</td>'
                + '<td>alarm interval</td>'
                + '<td>alarm interval option</td>'
                + '<td>alarm rising threshold</td>'
                + '<td>alarm rising event index </td>'
                + '<td>alarm falling threshold</td>'
                + '<td>alarm falling event index</td>'
                + '<td>alarm status</td>'
                + '<td>alarm owner</td></tr>';

            $.each(data, function (pIndex, pElement) {
                table = table
                + '<tr><td>' + pElement.alarmindex + '</td>'
                + '<td>' + pElement.alarmvariable + '</td>'
                + '<td>' + pElement.alarminterval + '</td>'
                + '<td>' + pElement.alarmintervaloption + '</td>'
                + '<td>' + pElement.alarmrisingthreshold + '</td>'
                + '<td>' + pElement.alarmrisingeventindex + '</td>'
                + '<td>' + pElement.alarmfallingthreshold +'</td>'
                + '<td>' + pElement.alarmfallingeventindex + '</td>'
                + '<td>' + pElement.alarmstatus + '</td>'
                + '<td>' + pElement.alarmowner + '</td></tr>';
            });
            table = table + '</table>';
            $("#result").append(table);
        }  // if
        else if ($('select#commands').val() === 'showrmonevent' ||
         $('select#commands').val() == 'setrmonevent')  {
            table = '<table border = 1>'
                + '<tr><td>event index</td>'
                + '<td>event trap </td>'
                + '<td>event community</td>'
                + '<td>event last timesent</td>'
                + '<td>event description </td>'
                + '<td>event status</td>'
                + '<td>event owner</td></tr>';

            $.each(data, function (pIndex, pElement) {
                table = table + '<tr><td>' + pElement.eventindex + '</td>'
                + '<td>' + pElement.eventtrap + '</td>'
                + '<td>' + pElement.eventcommunity + '</td>'
                + '<td>' + pElement.eventlasttimesent + '</td>'
                + '<td>' + pElement.eventdescription + '</td>'
                + '<td>' + pElement.eventstatus + '</td>'
                + '<td>' + pElement.eventowner + '</td></tr>';
            });
            table = table + '</table>';
            $("#result").append(table);
        }  // else if
        else {
            $.each(data, function (pIndex, pElement) {
                var lName = { text: pElement.name };
                if (lName.text == "OID Name") {
                    var lValue = { text: pElement.value };

                    var lLI = document.createElement("li");
                    $("#node_list").append(lLI);
                    $(lLI).append($("<p>", lValue));
                }  // if
                else if (lName.text == "NETSTAT" || lName.text == "STATUS" || lName.text == "TRANSLATE") {
                    var lValue = { text: pElement.value };

                    var lLI = document.createElement("li");
                    $("#node_list").append(lLI);
                    $(lLI).append($("<p>", lValue));
                }  // if
                else {
                    var lValue = { text: pElement.value };
                    var lLI = document.createElement("li");
                    $("#node_list").append(lLI);
                    $(lLI).append($("<p>", lName));
                    $(lLI).append($("<p>", lValue));
                }  // else
            });
        }  // else
    }  // parseResponse

    ajaxCallFailed = function (pJQXHR, pTextStatus) {
        alert("Error:" + pJQXHR + " Status:" + pTextStatus);
    }

    $(document).ready(function () {
        $('#commands').change(function () {
            if ($('select#commands').val() === '' || $('select#commands').val() === 'montiorSNMPStatus'
                || $('select#commands').val() === 'showrmonalarm' || $('select#commands').val() === 'showrmonevent') {
                $('#optionalParameters').html('');
            }

            if ($('select#commands').val() === 'createsec2group') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="groupnameLabel">Group Name</label>'
                    + '<input name = "groupname" type = "text" id = "groupname"/>'
                    + '<label id="securitynameLabel">Security Name</label>'
                    + '<input name = "securityname" type = "text" id = "securityname"/>';

                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'deletesec2group') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="securitynameLabel">Security Name</label>'
                    + '<input name = "securityname" type = "text" id = "securityname"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'createview') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="viewNameLabel">View Name</label>'
                    + '<input name = "viewname" type = "text" id = "viewname"/>'
                    + '<label id="oidTreeLabel">OID Tree</label>'
                    + '<input name = "oid" type = "text" id="oid"/>'
                    + '<select name="option">'
                    + '<option value="included">included</option>'
                    + '<option value="excluded">excluded</option>'
                    + '</select>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'deleteview') {
                $('#optionalParameters').html('');
                var form =
                    '<label id="viewNameLabel">View Name</label>'
                    + '<input name = "viewname" type = "text" id = "viewname"/>'
                    + '<label id="oidTreeLabel">OID Tree</label>'
                    + '<input name = "oid" type = "text" id="oid"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'createaccess') {
                $('#optionalParameters').html('');
                form =
                    '<label id="groupname">Group Name</label>'
                    + '<input name = "groupname" type = "text" id = "groupname"/>'
                    + '<label id="readviewnameLabel">Read View Name</label>'
                    + '<input name = "readviewname" type = "text" id = "readviewname"/>'
                    + '<label id="writeviewnameLabel">Write View Name</label>'
                    + '<input name = "writeviewname" type = "text" id = "writeviewname"/>'
                    + '<label id="notifyviewnameLabel">Notify View Name</label>'
                    + '<input name = "notifyviewname" type = "text" id = "notifyviewname"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'deleteaccess') {
                $('#optionalParameters').html('');
                form =
                    '<label id="groupname">Group Name</label>'
                    + '<input name = "groupname" type = "text" id = "groupname"/>';
                $('#optionalParameters').append(form);
            }

            if ($('select#commands').val() === 'set') {
                $('#optionalParameters').html('');
                form =
                     '<select name="oid" id="oid">'
                    + '<option value="1.3.6.1.2.1.1.4.0">contact</option>'
                    + '<option value="1.3.6.1.2.1.1.6.0">location</option>'
                    + '<option value="1.3.6.1.2.1.1.5.0">name</option>'
                    + '</select>'
                    + '<input name = "value" type = "text" id = "option"/>';
                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'enablesnmpagent') {
                $('#optionalParameters').html('');
                form =
                     '<select name="option" id="option">'
                    + '<option value="enable">enable</option>'
                    + '<option value="disable">disable</option>'
                    + '</select>';

                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'enablermon') {
                $('#optionalParameters').html('');
                form =
                     '<select name="option" id="option">'
                    + '<option value="native">native</option>'
                    + '<option value="promisciuos">promisciuos</option>'
                    + '</select>';

                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'setrmonqueue') {
                $('#optionalParameters').html('');
                form =
                    '<label id="queueRMONSizeLabel">Queue size</label>'
                    + '<input name = "value" type = "text" id = "value"/>';

                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'setrmonalarm') {
                $('#optionalParameters').html('');
                form =
                    '<label id="alarmindexLabel">index</label>'
                    + '<input name = "alarmindex" type = "text" id = "alarmIndex"/>'
                    + '<label id="alarmintervalLabel">interval</label>'
                    + '<input name = "alarminterval" type = "text" id = "alarminterval"/>'
                    + '<label id="alarmvariableLabel">variable</label>'
                    + '<input name = "alarmvariable" type = "text" id = "alarmvariable"/>'
                    + '<label id="alarmsampletypeLabel">sample type</label>'
                    + '<input name = "alarmsampletype" type = "text" id = "alarmsampletype"/>'
                    + '<label id="alarmstartupalarmLabel">start up alarm</label>'
                    + '<input name = "alarmstartupalarm" type = "text" id = "alarmstartupalarm"/>'
                    + '<label id="alarmRisingThresholdLabel">rising threshold</label>'
                    + '<input name = "alarmrisingthreshold" type = "text" id = "alarmrisingthreshold"/>'
                    + '<label id="alarmfallingthresholdLabel">falling threshold</label>'
                    + '<input name = "alarmfallingthreshold" type = "text" id = "alarmfallingthreshold"/>'
                    + '<label id="alarmrisingeventindexLabel">rising event index</label>'
                    + '<input name = "alarmRisingEventIndex" type = "text" id = "alarmrisingeventindex"/>'
                    + '<label id="alarmfallingeventindexLabel">rising event index</label>'
                    + '<input name = "alarmfallingeventIndex" type = "text" id = "alarmfallingeventindex"/>'
                    + '<label id="alarmstatusLabel">status</label>'
                    + '<input name = "alarmstatus" type = "text" id = "alarmstatus"/>';



                $('#optionalParameters').append(form);
            }
            if ($('select#commands').val() === 'setrmonevent') {
                $('#optionalParameters').html('');
                form =
                    '<label id="eventindexLabel">index</label>'
                    + '<input name = "eventindex" type = "text" id = "eventindex"/>'
                    + '<label id="eventdescriptionLabel">description</label>'
                    + '<input name = "eventdescription" type = "text" id = "eventdescription"/>'
                    + '<label id="eventtypeLabel">type</label>'
                    + '<input name = "eventtype" type = "text" id = "eventtype"/>'
                    + '<label id="eventCommunityLabel">community</label>'
                    + '<input name = "eventCommunity" type = "text" id = "eventcommunity"/>'
                    + '<label id="eventLastTimeSentLabel">last time sent</label>'
                    + '<input name = "eventlasttimesent" type = "text" id = "eventlasttimesent"/>'
                    + '<label id="eventownerlabel">owner</label>'
                    + '<input name = "eventowner" type = "text" id = "eventowner"/>'
                    + '<label id="eventstatusLabel">status</label>'
                    + '<input name = "eventstatus" type = "text" id = "eventstatus"/>';

                $('#optionalParameters').append(form);
            }
        });

        $('#input_form').submit(function () {

            var lURL = "https://" + $('#txtServerHost').val() + ":8181/CS158B_WEBSERVICES/rest/snmpoperation/" + $('select#commands').val() + "?" + $(this).serialize();
            var result = $('#result').html(lURL);
            $.ajax({
                cache: true,
                url: lURL,
                data: {},
                datatype: "GET",
                contentType: "application/javascript",
                dataType: "jsonp",
                success: parseResponse,
                error: ajaxCallFailed
            });  // ajax

            return false;
        });
    });
</script>
</head>
<body>
<div id="input">
	 <form id="input_form" >
		<label id="serverhostlabel">Server Host: </label>
		<input type = "text" id = "txtServerHost" value = "24.7.122.241"/>
		<label id="hostlabel">Host</label>
		<input type="text" name="host" id="host" placeholder="Host IP goes here" value = "" required> 
		<label id="communitylabel">Community</label>
		<input type="password" name="community" id="community" placeholder="Community" value = "public">
         <div id="optionalParameters"></div>
		<input type="submit" value="Submit" name="submit"/>
	</form>
            <label id="commandlabel">Commands</label>
                <select name="commands" id = "commands">
                    <option value="">Choose a command</option>
                    <option value="createsec2group">create group</option>
                    <option value="deletesec2group">delete group</option>
                    <option value="createview">create view</option>
                    <option value="deleteview">delete view</option>
                    <option value="createaccess">create access control</option>
                    <option value="deleteaccess">delete access control</option>
					<option value="set">establish the contact, location, name</option>
					<option value="montiorsnmpstatus">monitor SNMP status</option>
					<option value="enablesnmpagent">enable the snmp agent</option>
					<option value="enablermon">enable RMON</option>
                    <option value="showrmonalarm">show RMON alarm</option>
                    <option value="showrmonevent">show RMON event</option>
					<option value="setrmonqueue">set RMON queue</option>
					<option value="setrmonalarm">set RMON alarm</option>
					<option value="setrmonevent">set RMON event</option>
                </select>
</div>
<div id="result"></div>
<div id="node_list"></div>
</body>
</html>